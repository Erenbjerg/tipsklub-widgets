<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BÃ¸dekassen Total</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
  *{box-sizing:border-box}

  html,body{
    margin:0; padding:0; height:100%;
    background:transparent;
    font-family:'Roboto', sans-serif;
    display:flex; 
    align-items:flex-start; /* <--- RETTET: Starter i toppen */
    justify-content:center;
  }

  .wrap{
    width:100%; 
    padding:10px;
    padding-top: 20px; /* <--- RETTET: Plads til glÃ¸d i toppen */
    display:flex; align-items:center; justify-content:center;
  }

  .card{
    background: rgba(20, 20, 20, 0.95);
    border: 2px solid #C5A059; /* Guld kant */
    border-radius: 22px;
    padding: 22px;
    text-align:center;
    box-shadow: 0 0 20px rgba(197, 160, 89, 0.25);
    max-width:520px; width:100%;
    color: #fff;
    display: flex; flex-direction: column; align-items: center;
  }

  .icon {
    font-size: 24px; margin-bottom: 8px;
  }

  .label{
    font-family: 'Playfair Display', serif;
    letter-spacing:.2em;
    text-transform:uppercase;
    font-size:13px;
    color:#C5A059; /* Guld */
    margin-bottom:6px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
  }

  .amount{
    font-size:48px; font-weight:900; line-height:1;
    font-family: 'Playfair Display', serif;
    color: #fff;
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
  }

  /* NÃ¥r belÃ¸bet er hÃ¸jt, bliver det Guld/GrÃ¸n */
  .amount.rich {
    color: #39ff14; /* Neon grÃ¸n */
    text-shadow: 0 0 15px rgba(57, 255, 20, 0.5);
  }

  .currency{
    margin-top:6px; font-size:14px; font-weight:700;
    color:#888; letter-spacing: 1px;
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <div class="icon">ðŸ’°</div>
    <div class="label">BÃ¸dekassen</div>
    <div id="amount" class="amount">0</div>
    <div class="currency">Til festen</div>
  </div>
</div>

<script>
  // --- KONFIGURATION START ---
  const DEFAULT_ID = "AKfycby_L8hwDWMeesGsFA600IpggHgQir41tmSoST4YLQ7w8fYFdunit4KDaFhWt2CIYrKl";
  const params = new URLSearchParams(window.location.search);
  const urlId = params.get("id");
  const scriptId = urlId || DEFAULT_ID;
  const API_URL = "https://script.google.com/macros/s/" + scriptId + "/exec";
  // --- KONFIGURATION SLUT ---

  function animate(el, target){
    let current = 0;
    const steps = 60;
    const step = Math.max(1, Math.floor(target / steps));

    const timer = setInterval(() => {
      current += step;
      if (current >= target) {
        current = target;
        clearInterval(timer);
      }
      el.innerText = current.toLocaleString("da-DK");
    }, 20);
  }

  fetch(API_URL + "?_=" + Date.now(), { cache: "no-store" })
    .then(r => r.json())
    .then(d => {
      // Vi summerer alle bÃ¸derne manuelt for at vÃ¦re sikre
      const rows = d.boder || [];
      let sum = 0;
      rows.forEach(r => {
        sum += Number(r.total || 0);
      });

      const el = document.getElementById("amount");
      if (sum > 0) el.classList.add("rich");
      animate(el, sum);
    })
    .catch(e => {
      document.getElementById("amount").innerText = "â€”";
    });
</script>
</body>
</html>
